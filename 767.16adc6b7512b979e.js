"use strict";(self.webpackChunkhealthy=self.webpackChunkhealthy||[]).push([[767],{8767:(y,x,i)=>{i.r(x),i.d(x,{AuthModule:()=>H});var I=i(649),l=i(6223),Z=i(7394),e=i(9212),U=i(7700),a=i(6814);let f=(()=>{class t{constructor(r,o){this.document=r,this.platformId=o,this.documentIsAccessible=(0,a.NF)(this.platformId)}static getCookieRegExp(r){const o=r.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+o+"|;\\s*"+o+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(r){try{return decodeURIComponent(r)}catch{return r}}check(r){return!!this.documentIsAccessible&&(r=encodeURIComponent(r),t.getCookieRegExp(r).test(this.document.cookie))}get(r){if(this.documentIsAccessible&&this.check(r)){r=encodeURIComponent(r);const n=t.getCookieRegExp(r).exec(this.document.cookie);return n[1]?t.safeDecodeURIComponent(n[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const r={},o=this.document;return o.cookie&&""!==o.cookie&&o.cookie.split(";").forEach(n=>{const[p,g]=n.split("=");r[t.safeDecodeURIComponent(p.replace(/^ /,""))]=t.safeDecodeURIComponent(g)}),r}set(r,o,n,p,g,A,S){if(!this.documentIsAccessible)return;if("number"==typeof n||n instanceof Date||p||g||A||S)return void this.set(r,o,{expires:n,path:p,domain:g,secure:A,sameSite:S||"Lax"});let N=encodeURIComponent(r)+"="+encodeURIComponent(o)+";";const _=n||{};_.expires&&(N+="number"==typeof _.expires?"expires="+new Date((new Date).getTime()+1e3*_.expires*60*60*24).toUTCString()+";":"expires="+_.expires.toUTCString()+";"),_.path&&(N+="path="+_.path+";"),_.domain&&(N+="domain="+_.domain+";"),!1===_.secure&&"None"===_.sameSite&&(_.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${r} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),_.secure&&(N+="secure;"),_.sameSite||(_.sameSite="Lax"),N+="sameSite="+_.sameSite+";",this.document.cookie=N}delete(r,o,n,p,g="Lax"){this.documentIsAccessible&&this.set(r,"",{expires:new Date("Thu, 01 Jan 1970 00:00:01 GMT"),path:o,domain:n,secure:p,sameSite:g})}deleteAll(r,o,n,p="Lax"){if(!this.documentIsAccessible)return;const g=this.getAll();for(const A in g)g.hasOwnProperty(A)&&this.delete(A,r,o,n,p)}static#e=this.\u0275fac=function(o){return new(o||t)(e.LFG(a.K0),e.LFG(e.Lbi))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var b=i(6593),v=i(8736),T=i(1043);function m(t,d){1&t&&(e.TgZ(0,"h3",27),e._uU(1,"Sign In"),e.qZA())}function u(t,d){1&t&&(e.TgZ(0,"p",28),e._uU(1,"Get access to your account."),e.qZA())}function h(t,d){1&t&&(e.TgZ(0,"h3",27),e._uU(1,"Sign Up"),e.qZA())}function c(t,d){1&t&&(e.TgZ(0,"p",28),e._uU(1,"Create a new account."),e.qZA())}function s(t,d){1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"mat-error"),e._uU(1,"please use valid email"),e.qZA())}function C(t,d){1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"mat-error"),e._uU(1,"please enter your first name"),e.qZA())}function w(t,d){if(1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"div",10)(1,"label",29),e._uU(2,"First Name"),e.qZA(),e.TgZ(3,"div",12),e._UZ(4,"input",30),e.TgZ(5,"span",14),e.O4$(),e.TgZ(6,"svg",15),e._UZ(7,"path",16),e.qZA()(),e.YNc(8,C,2,0,"mat-error",17),e.qZA()()),2&t){const r=e.oxw();let o;e.xp6(8),e.Q6J("ngIf",(null==(o=r.logInForm.get("firstName"))?null:o.invalid)&&(null==(o=r.logInForm.get("firstName"))?null:o.touched))}}function F(t,d){1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"mat-error"),e._uU(1,"please enter your last name"),e.qZA())}function O(t,d){if(1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"div",10)(1,"label",31),e._uU(2,"Last Name"),e.qZA(),e.TgZ(3,"div",12),e._UZ(4,"input",32),e.TgZ(5,"span",14),e.O4$(),e.TgZ(6,"svg",15),e._UZ(7,"path",16),e.qZA()(),e.YNc(8,F,2,0,"mat-error",17),e.qZA()()),2&t){const r=e.oxw();let o;e.xp6(8),e.Q6J("ngIf",(null==(o=r.logInForm.get("lastName"))?null:o.invalid)&&(null==(o=r.logInForm.get("lastName"))?null:o.touched))}}function k(t,d){1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"mat-error"),e._uU(1,"please enter your last name"),e.qZA())}function P(t,d){if(1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"div",10)(1,"label",33),e._uU(2,"Phone Number"),e.qZA(),e.TgZ(3,"div",12),e._UZ(4,"input",34),e.TgZ(5,"span",14),e.O4$(),e.TgZ(6,"svg",15),e._UZ(7,"path",16),e.qZA()(),e.YNc(8,k,2,0,"mat-error",17),e.qZA()()),2&t){const r=e.oxw();let o;e.xp6(8),e.Q6J("ngIf",(null==(o=r.logInForm.get("phoneNumber"))?null:o.invalid)&&(null==(o=r.logInForm.get("phoneNumber"))?null:o.touched))}}function E(t,d){1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"mat-error"),e._uU(1,"please enter your last name"),e.qZA())}function $(t,d){if(1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"div",10)(1,"label",35),e._uU(2,"Address"),e.qZA(),e.TgZ(3,"div",12),e._UZ(4,"input",36),e.TgZ(5,"span",14),e.O4$(),e.TgZ(6,"svg",15),e._UZ(7,"path",16),e.qZA()(),e.YNc(8,E,2,0,"mat-error",17),e.qZA()()),2&t){const r=e.oxw();let o;e.xp6(8),e.Q6J("ngIf",(null==(o=r.logInForm.get("Address"))?null:o.invalid)&&(null==(o=r.logInForm.get("Address"))?null:o.touched))}}function D(t,d){1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"mat-error"),e._uU(1,"please enter your preferences"),e.qZA())}function J(t,d){if(1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"div",10)(1,"label",37),e._uU(2,"Preferences"),e.qZA(),e.TgZ(3,"div",12),e._UZ(4,"input",38),e.TgZ(5,"span",14),e.O4$(),e.TgZ(6,"svg",15),e._UZ(7,"path",16),e.qZA()(),e.YNc(8,D,2,0,"mat-error",17),e.qZA()()),2&t){const r=e.oxw();let o;e.xp6(8),e.Q6J("ngIf",(null==(o=r.logInForm.get("preferences"))?null:o.invalid)&&(null==(o=r.logInForm.get("preferences"))?null:o.touched))}}function q(t,d){1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"mat-error"),e._uU(1," please use valid password "),e.qZA())}function V(t,d){1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"mat-error"),e._uU(1,"please confirm your password"),e.qZA())}function B(t,d){if(1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"div",10)(1,"label",39),e._uU(2,"Confirm Password"),e.qZA(),e.TgZ(3,"div",12),e._UZ(4,"input",40),e.TgZ(5,"span",14),e.O4$(),e.TgZ(6,"svg",22),e._UZ(7,"path",23),e.qZA()(),e.YNc(8,V,2,0,"mat-error",17),e.qZA()()),2&t){const r=e.oxw();let o;e.xp6(8),e.Q6J("ngIf",(null==(o=r.logInForm.get("confirmPassword"))?null:o.invalid)&&(null==(o=r.logInForm.get("confirmPassword"))?null:o.touched))}}function Q(t,d){if(1&t){const r=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.logIn())}),e._uU(1,"Sign In"),e.qZA()}if(2&t){const r=e.oxw();e.Q6J("disabled",r.loggingIn)}}function R(t,d){if(1&t){const r=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.signUp())}),e._uU(1,"Sign Up"),e.qZA()}if(2&t){const r=e.oxw();e.Q6J("disabled",r.loggingIn)}}function Y(t,d){if(1&t){const r=e.EpF();e.TgZ(0,"span",42),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.toggleSignIn())}),e._uU(1,"If you don't have an account, Sign Up Instead"),e.qZA()}}function z(t,d){if(1&t){const r=e.EpF();e.TgZ(0,"span",42),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.toggleSignIn())}),e._uU(1,"If you do have an account, Sign In Instead"),e.qZA()}}const j=()=>["/dashboard/products"],G=[{path:"",component:(()=>{class t{constructor(r,o,n,p,g){this.fb=r,this.dialog=o,this.cookieService=n,this.title=p,this.usersService=g,this.signIn=!0,this.logoPath="assets/logo.png",this.loggingIn=!1,this.loggingInSubscription=new Z.w0,this.logInForm=this.fb.group({email:["",[l.kI.required,l.kI.email]],password:["",[l.kI.required]],firstName:[""],lastName:[""],phoneNumber:[""],address:[""],role:["customer"],confirmPassword:[""],preferences:[""]},{validators:this.confirmPasswordValidator("password","confirmPassword")})}ngOnInit(){this.title.setTitle("Login")}ngOnDestroy(){this.loggingInSubscription.unsubscribe()}logIn(){this.usersService.logIn(this.logInForm.value.email||"",this.logInForm.value.password||"")}signUp(){this.usersService.createNewUser({first_name:this.logInForm.value.firstName||"",last_name:this.logInForm.value.lastName||"",phone:this.logInForm.value.phoneNumber||"",address:this.logInForm.value.address||"",role:this.logInForm.value.role||"customer",email:this.logInForm.value.email||"",password:this.logInForm.value.password||"",customer_prefrences:this.logInForm.value.preferences||"",id:0})}toggleSignIn(){this.signIn=!this.signIn,this.toggleValidators()}toggleValidators(){this.signIn?(this.logInForm.get("firstName")?.clearValidators(),this.logInForm.get("lastName")?.clearValidators(),this.logInForm.get("phoneNumber")?.clearValidators(),this.logInForm.get("address")?.clearValidators(),this.logInForm.get("role")?.clearValidators(),this.logInForm.get("confirmPassword")?.clearValidators()):(this.logInForm.get("firstName")?.setValidators([l.kI.required]),this.logInForm.get("lastName")?.setValidators([l.kI.required]),this.logInForm.get("phoneNumber")?.setValidators([l.kI.required]),this.logInForm.get("address")?.setValidators([l.kI.required]),this.logInForm.get("role")?.setValidators([l.kI.required]),this.logInForm.get("confirmPassword")?.setValidators([l.kI.required])),this.logInForm.get("firstName")?.updateValueAndValidity(),this.logInForm.get("lastName")?.updateValueAndValidity(),this.logInForm.get("phoneNumber")?.updateValueAndValidity(),this.logInForm.get("address")?.updateValueAndValidity(),this.logInForm.get("role")?.updateValueAndValidity(),this.logInForm.get("confirmPassword")?.updateValueAndValidity()}confirmPasswordValidator(r,o){return n=>{const p=n.get(r),g=n.get(o);return!p||!g||g.errors&&!g.errors.passwordMismatch||g.setErrors(p.value!==g.value?{passwordMismatch:!0}:null),null}}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(l.qu),e.Y36(U.uw),e.Y36(f),e.Y36(b.Dx),e.Y36(v.f))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:42,vars:19,consts:[[1,"container"],[1,"row","flex-center","min-vh-100"],[1,"col-sm-10","col-md-8","col-lg-5","col-xl-5","col-xxl-3"],[1,"d-flex","flex-center","text-decoration-none","mb-4",3,"routerLink"],[1,"d-flex","align-items-center","fw-bolder","fs-5","d-inline-block"],["src","assets/logo.png","alt","logo","width","240",2,"margin-bottom","1.5rem !important"],[1,"text-center","mb-7"],["class","main-title",4,"ngIf"],["class","sub-title",4,"ngIf"],[3,"formGroup"],[1,"mb-3","text-start"],["for","email",1,"form-label"],[1,"form-icon-container"],["id","username","type","email","placeholder","name@example.com","formControlName","email",1,"form-control","form-icon-input"],[1,"icon","form-icon"],["width","16px","height","16px","aria-hidden","true","focusable","false","data-prefix","fas","data-icon","user","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512","data-fa-i2svg","",1,"svg-inline--fa","fa-user","text-body","fs-5"],["fill","currentColor","d","M224 256c70.7 0 128-57.31 128-128s-57.3-128-128-128C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3c0 19.14 15.52 34.67 34.66 34.67h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304z"],[4,"ngIf"],["class","mb-3 text-start",4,"ngIf"],["for","password",1,"form-label"],["id","password","type","password","placeholder","Password","formControlName","password",1,"form-control","form-icon-input"],[1,"fas","fa-key","text-900","fs--1","form-icon"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","key","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512","data-fa-i2svg","",1,"svg-inline--fa","fa-key","text-body","fs-5",2,"width","15px","margin-top","0.1rem"],["fill","currentColor","d","M282.3 343.7L248.1 376.1C244.5 381.5 238.4 384 232 384H192V424C192 437.3 181.3 448 168 448H128V488C128 501.3 117.3 512 104 512H24C10.75 512 0 501.3 0 488V408C0 401.6 2.529 395.5 7.029 391L168.3 229.7C162.9 212.8 160 194.7 160 176C160 78.8 238.8 0 336 0C433.2 0 512 78.8 512 176C512 273.2 433.2 352 336 352C317.3 352 299.2 349.1 282.3 343.7zM376 176C398.1 176 416 158.1 416 136C416 113.9 398.1 96 376 96C353.9 96 336 113.9 336 136C336 158.1 353.9 176 376 176z"],["class","btn btn-primary w-100 mb-3 mt-4","type","submit",3,"disabled","click",4,"ngIf"],[2,"display","flex","justify-content","space-around"],["style","color: #0d6efd; text-decoration: underline; cursor: pointer",3,"click",4,"ngIf"],[1,"main-title"],[1,"sub-title"],["for","firstName",1,"form-label"],["id","firstName","type","text","placeholder","First Name","formControlName","firstName",1,"form-control","form-icon-input"],["for","lastName",1,"form-label"],["id","lastName","type","text","placeholder","Last Name","formControlName","lastName",1,"form-control","form-icon-input"],["for","phoneNumber",1,"form-label"],["id","phoneNumber","type","text","placeholder","Last Name","formControlName","phoneNumber",1,"form-control","form-icon-input"],["for","Address",1,"form-label"],["id","Address","type","text","placeholder","Last Name","formControlName","address",1,"form-control","form-icon-input"],["for","role",1,"form-label"],["id","preferences","type","text","placeholder","Preferences","formControlName","preferences",1,"form-control","form-icon-input"],["for","confirmPassword",1,"form-label"],["id","confirmPassword","type","password","placeholder","Confirm Password","formControlName","confirmPassword",1,"form-control","form-icon-input"],["type","submit",1,"btn","btn-primary","w-100","mb-3","mt-4",3,"disabled","click"],[2,"color","#0d6efd","text-decoration","underline","cursor","pointer",3,"click"]],template:function(o,n){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"div",4),e._UZ(5,"img",5),e.qZA()(),e.TgZ(6,"div",6),e.YNc(7,m,2,0,"h3",7)(8,u,2,0,"p",8)(9,h,2,0,"h3",7)(10,c,2,0,"p",8),e.qZA(),e.TgZ(11,"form",9)(12,"div",10)(13,"label",11),e._uU(14,"Email address"),e.qZA(),e.TgZ(15,"div",12),e._UZ(16,"input",13),e.TgZ(17,"span",14),e.O4$(),e.TgZ(18,"svg",15),e._UZ(19,"path",16),e.qZA()(),e.YNc(20,s,2,0,"mat-error",17),e.qZA()(),e.YNc(21,w,9,1,"div",18)(22,O,9,1,"div",18)(23,P,9,1,"div",18)(24,$,9,1,"div",18)(25,J,9,1,"div",18),e.kcU(),e.TgZ(26,"div",10)(27,"label",19),e._uU(28,"Password"),e.qZA(),e.TgZ(29,"div",12),e._UZ(30,"input",20)(31,"span",21),e.TgZ(32,"span",14),e.O4$(),e.TgZ(33,"svg",22),e._UZ(34,"path",23),e.qZA()(),e.YNc(35,q,2,0,"mat-error",17),e.qZA()(),e.YNc(36,B,9,1,"div",18)(37,Q,2,1,"button",24)(38,R,2,1,"button",24),e.kcU(),e.TgZ(39,"div",25),e.YNc(40,Y,2,0,"span",26)(41,z,2,0,"span",26),e.qZA()()()()()),2&o){let p,g;e.xp6(3),e.Q6J("routerLink",e.DdM(18,j)),e.xp6(4),e.Q6J("ngIf",n.signIn),e.xp6(1),e.Q6J("ngIf",n.signIn),e.xp6(1),e.Q6J("ngIf",!n.signIn),e.xp6(1),e.Q6J("ngIf",!n.signIn),e.xp6(1),e.Q6J("formGroup",n.logInForm),e.xp6(9),e.Q6J("ngIf",(null==(p=n.logInForm.get("email"))?null:p.invalid)&&(null==(p=n.logInForm.get("email"))?null:p.touched)),e.xp6(1),e.Q6J("ngIf",!n.signIn),e.xp6(1),e.Q6J("ngIf",!n.signIn),e.xp6(1),e.Q6J("ngIf",!n.signIn),e.xp6(1),e.Q6J("ngIf",!n.signIn),e.xp6(1),e.Q6J("ngIf",!n.signIn),e.xp6(10),e.Q6J("ngIf",(null==(g=n.logInForm.get("password"))?null:g.invalid)&&(null==(g=n.logInForm.get("password"))?null:g.touched)),e.xp6(1),e.Q6J("ngIf",!n.signIn),e.xp6(1),e.Q6J("ngIf",n.signIn),e.xp6(1),e.Q6J("ngIf",!n.signIn),e.xp6(2),e.Q6J("ngIf",n.signIn),e.xp6(1),e.Q6J("ngIf",!n.signIn)}},dependencies:[I.rH,T.TO,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,a.O5],styles:[".flex-center[_ngcontent-%COMP%]{align-items:center;justify-content:center}.main-title[_ngcontent-%COMP%]{font-size:calc(1.28125rem + .375vw);font-weight:700;margin-bottom:.25rem}.sub-title[_ngcontent-%COMP%]{color:#525b75}.form-label[_ngcontent-%COMP%]{padding-left:1rem;line-height:1.2;text-transform:uppercase;margin-bottom:0;font-size:.64rem;font-weight:600;color:#525b75}.form-icon-container[_ngcontent-%COMP%]{position:relative}.form-icon-container[_ngcontent-%COMP%]   .form-icon-input[_ngcontent-%COMP%], .form-icon-container[_ngcontent-%COMP%]   .form-icon-label[_ngcontent-%COMP%]{padding-left:2.5rem}.form-icon-container[_ngcontent-%COMP%]   .form-icon[_ngcontent-%COMP%]{position:absolute;top:9px;left:1rem}.icon[_ngcontent-%COMP%]{color:#31374a}[_ngcontent-%COMP%]::placeholder{color:#9fa6bc}.mb-7[_ngcontent-%COMP%]{margin-bottom:3rem!important}"]})}return t})()}];let M=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[I.Bz.forChild(G),I.Bz]})}return t})();var K=i(5149),W=i(1474);let H=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[M,K.q,l.UX,a.ez,W.JF,M]})}return t})()},2528:(y,x,i)=>{i.d(x,{n:()=>I});class I{constructor(Z="",e="",U="",a="",f="",b="",v="",T="",m="",u=""){this.initials="",this.email=Z,this.role=e,this.first_name=U,this.last_name=a,this.id=f,this.fullName=`${U} ${a}`,U&&a&&(this.initials=`${U.charAt(0)}${a.charAt(0)}`),this.customer_address=b,this.customer_phone=v,this.customer_prefrences=T,this.token=m,this.password=u}}},77:(y,x,i)=>{i.d(x,{l:()=>Z});var I=i(9212),l=i(8763);let Z=(()=>{class e{constructor(a){this.toastr=a}showError(a,f="",b=3e3,v="increasing",T=!0,m=!0){let u="";"object"==typeof a.error&&(a.error&&a.error.error&&(u=a.error.error),a.error&&a.error.title&&(f=`${f} ${a.error.title}`)),"string"==typeof a.error&&(u=a.error),403==a.status&&(u="You are not authorized to perform this operation."),404==a.status&&(u="Error 404: Not found."),""==u&&""==f&&(f="An error occurred."),this.toastr.error(u,f,{timeOut:b,progressAnimation:v,progressBar:T,closeButton:m})}showSuccess(a,f="",b=3e3,v="increasing",T=!0,m=!0){this.toastr.success(a,f,{timeOut:b,progressAnimation:v,progressBar:T,closeButton:m})}static#e=this.\u0275fac=function(f){return new(f||e)(I.LFG(l._W))};static#t=this.\u0275prov=I.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()},8736:(y,x,i)=>{i.d(x,{f:()=>b});var I=i(5619),l=i(2528),Z=i(1474),e=i(553),U=i(9212),a=i(649),f=i(77);let b=(()=>{class v{constructor(m,u,h){this.http=m,this.router=u,this.toasterDisplayService=h,this.currentUserSubject=new I.X(new Object),this.usersSubject=new I.X([]),this.dummyUserList=[new l.n("ahmed@healthy.com","admin","Ahmed","Aladdin","1","23th Main Street, London"),new l.n("mohammed@gmail.com","user","Mohammed","Ibrahim","2","23th Main Street, London"),new l.n("saber@gmail.com","user","Saber","Osman","3","23th Main Street, London")]}logIn(m,u){this.http.post(e.N.serviceBase+"login",{email:m,password:u}).subscribe(h=>{let c=h.data,s=new l.n;s.email=c.email,s.role=c.role,s.first_name=c.first_name,s.last_name=c.last_name,s.id=c.id,s.customer_address=c.customer_address,s.customer_phone=c.customer_phone,s.customer_prefrences=c.customer_prefrences,s.token=c.token,s.password=c.password,s.fullName=`${s.first_name} ${s.last_name}`,s.first_name&&s.last_name&&(s.initials=`${s.first_name.charAt(0)}${s.last_name.charAt(0)}`),this.currentUserSubject.next(s),localStorage.setItem("currentUser",JSON.stringify(s)),s.role?(this.toasterDisplayService.showSuccess("Login successful"),this.router.navigate(["/products"])):this.toasterDisplayService.showError({error:"User Not Found"})},h=>{this.toasterDisplayService.showError({error:h.error.data.email[0]})})}logOut(){this.currentUserSubject.next(new l.n),localStorage.removeItem("currentUser")}getCurrentUser(){let m=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")||""):new l.n;this.currentUserSubject.next(m)}getUsers(){let u=JSON.parse(localStorage.getItem("currentUser")||"").token;const h=(new Z.WM).set("Authorization",`Bearer ${u}`);this.http.get(e.N.serviceBase+"users",{headers:h}).subscribe(c=>{c.data.forEach(s=>{s.fullName=`${s.first_name} ${s.last_name}`}),this.usersSubject.next(c.data)})}createNewUser(m){const u=localStorage.getItem("currentUser"),h=u?JSON.parse(u):null;if(h){let c=h.token;const s=(new Z.WM).set("Authorization",`Bearer ${c}`);m.id?this.http.put(e.N.serviceBase+`users/${m.id}`,m,{headers:s}).subscribe(w=>{this.getUsers(),this.toasterDisplayService.showSuccess("User Updated Successfully")},w=>{this.toasterDisplayService.showError({error:w.error.data.email[0]})}):this.http.post(e.N.serviceBase+"users/create",m,{headers:s}).subscribe(C=>{this.toasterDisplayService.showSuccess("User Created Successfully"),this.getUsers()},C=>{this.toasterDisplayService.showError({error:C.error.data.email[0]})})}else this.http.post(e.N.serviceBase+"signup",m).subscribe(c=>{console.log(c),this.getUsers()},c=>{this.toasterDisplayService.showError({error:c.error.data.email[0]})});console.log(m)}deleteUser(m){const u=localStorage.getItem("currentUser"),h=u?JSON.parse(u):null;if(h){let c=h.token;const s=(new Z.WM).set("Authorization",`Bearer ${c}`);this.http.delete(e.N.serviceBase+`users/${m.id}`,{headers:s}).subscribe(C=>{this.getUsers(),this.toasterDisplayService.showSuccess("User Deleted Successfully")},C=>{this.toasterDisplayService.showError({error:C.error.data.email[0]})})}}static#e=this.\u0275fac=function(u){return new(u||v)(U.LFG(Z.eN),U.LFG(a.F0),U.LFG(f.l))};static#t=this.\u0275prov=U.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},553:(y,x,i)=>{i.d(x,{N:()=>I});const I={production:!1,serviceBase:"https://food.sidigaber.org/api/"}}}]);